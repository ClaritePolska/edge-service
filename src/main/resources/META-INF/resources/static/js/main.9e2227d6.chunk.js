(this["webpackJsonpqiot-dashboard"]=this["webpackJsonpqiot-dashboard"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(11),c=n.n(s),i=(n(16),n(2)),o=(n(17),n(4)),l=n.n(o),u=n(5),d=n(3),b=n(6),m=new(function(){function e(){Object(d.a)(this,e)}return Object(b.a)(e,[{key:"getSerialNumber",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://qiot-edge-edge-service.apps.ocp4.clarite.lab/","/serial-number"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,r=n.serialNumber,console.log(r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),j=function e(t,n){Object(d.a)(this,e),this.lat=t,this.lon=n},h=new(function(){function e(){Object(d.a)(this,e)}return Object(b.a)(e,[{key:"getCurrentPosition",value:function(){if("geolocation"in navigator){console.log("Available");var e={enableHighAccuracy:!0};return new Promise((function(t,n){return navigator.geolocation.getCurrentPosition((function(e){var n=new j(e.coords.latitude,e.coords.longitude);t(n)}),(function(){var e=new j(52.184139,21.02051);t(e)}),e)}))}return new Promise((function(e,t){e(new j(52.184139,21.02051))}))}},{key:"getLocationDetails",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://us1.locationiq.com/v1/reverse.php?key=pk.10034caf64c0fc5c5c7c35a24632b4da&lat="+t.lat+"&lon="+t.lon+"&format=json");case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,a=r.address,s=a.country,c=a.city,e.abrupt("return",{country:s,city:c});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),f=n(0),p=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(i.a)(s,2),o=c[0],l=c[1],u=Object(r.useState)(""),d=Object(i.a)(u,2),b=d[0],j=d[1],p=Object(r.useState)(),v=Object(i.a)(p,2),O=v[0],g=v[1],x=Object(r.useState)(""),y=Object(i.a)(x,2),w=y[0],N=y[1],k=Object(r.useState)(""),S=Object(i.a)(k,2),C=S[0],P=S[1];return Object(r.useEffect)((function(){m.getSerialNumber().then((function(e){return a(e)}))}),[]),Object(r.useEffect)((function(){h.getCurrentPosition().then((function(e){return g({latitude:e.lat,longitude:e.lon}),h.getLocationDetails(e)})).then((function(e){j("".concat(e.country,", ").concat(e.city))}))}),[]),Object(f.jsx)("div",{className:"container m-5",children:Object(f.jsxs)("form",{className:"needs-validation",onSubmit:function(e){e.preventDefault();var t=O.latitude,r=O.longitude;fetch("".concat("http://qiot-edge-edge-service.apps.ocp4.clarite.lab/","/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:t,longitude:r,serial:n,keystorePassword:w,name:o})})},children:[Object(f.jsxs)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[Object(f.jsx)("h4",{className:"alert-heading",children:"Success!"}),Object(f.jsx)("p",{children:"The edge device was registered successfully!"}),Object(f.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(f.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(f.jsxs)("div",{className:"form-group mt-2",children:[Object(f.jsx)("label",{htmlFor:"serial-number",children:"Serial number"}),Object(f.jsx)("input",{id:"serial-number",className:"form-control",type:"text","aria-describedby":"serial-number-help",placeholder:"Serial number",name:"serialNumber",value:n,onChange:function(e){return a(e.target.value)},disabled:!0}),Object(f.jsx)("small",{id:"serial-number-help",className:"form-text text-muted",children:"The serial number of edge device."})]}),Object(f.jsxs)("div",{className:"form-group mt-2",children:[Object(f.jsx)("label",{htmlFor:"name",children:"Name"}),Object(f.jsx)("input",{id:"name",className:"form-control is-invalid",type:"text",placeholder:"Name",name:"name",onChange:function(e){return l(e.target.value)},value:o,required:!0})]}),Object(f.jsx)("div",{className:"invalid-feedback",children:"Please enter a name"}),Object(f.jsxs)("div",{className:"form-group mt-2",children:[Object(f.jsx)("label",{htmlFor:"address",children:"Address"}),Object(f.jsx)("input",{id:"address",className:"form-control",type:"text",name:"address",value:b,onChange:function(e){return j(e.target.value)},disabled:!0}),Object(f.jsx)("small",{id:"serial-number-help",className:"form-text text-muted",children:"Current location of edge device."})]}),Object(f.jsxs)("div",{className:"form-group mt-2",children:[Object(f.jsx)("label",{htmlFor:"keystore-password",children:"Keystore password"}),Object(f.jsx)("input",{id:"keystore-password",className:"form-control is-invalid",type:"password",placeholder:"Keystore password",name:"keystorePassword",onChange:function(e){return N(e.target.value)},value:w,required:!0})]}),Object(f.jsx)("div",{className:"invalid-feedback",children:"Please enter a keystore password"}),Object(f.jsxs)("div",{className:"form-group mt-2",children:[Object(f.jsx)("label",{htmlFor:"keystore-password-confirmation",children:"Keystore password confirmation"}),Object(f.jsx)("input",{id:"keystore-password-confirmation",className:"form-control is-invalid",type:"password",placeholder:"Keystore password confirmation",name:"keystorePasswordConfirmation",onChange:function(e){return P(e.target.value)},value:C,required:!0})]}),Object(f.jsx)("div",{className:"invalid-feedback",children:"Provided keystore password does not match"}),Object(f.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mt-4",children:"Submit"})]})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};n(20),n(21);c.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(p,{})}),document.getElementById("root")),v()}},[[43,1,2]]]);
//# sourceMappingURL=main.9e2227d6.chunk.js.map