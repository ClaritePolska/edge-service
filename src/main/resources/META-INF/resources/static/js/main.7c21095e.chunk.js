(this["webpackJsonpqiot-dashboard"]=this["webpackJsonpqiot-dashboard"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(8),c=n.n(s),o=(n(13),n(2)),i=(n(14),n(4)),u=n.n(i),l=n(5),d=n(3),f=n(6),b=new(function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"getSerialNumber",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://qiot-edge-edge-service.apps.ocp4.clarite.lab/","/serial-number"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,r=n.serialNumber,console.log(r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),p=function e(t,n){Object(d.a)(this,e),this.lat=t,this.lon=n},m=new(function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"getCurrentPosition",value:function(){if("geolocation"in navigator){console.log("Available");var e={enableHighAccuracy:!0};return new Promise((function(t,n){return navigator.geolocation.getCurrentPosition((function(e){var n=new p(e.coords.latitude,e.coords.longitude);t(n)}),(function(){var e=new p(21.02051,52.184139);t(e)}),e)}))}return new Promise((function(e,t){e(new p(21.02051,52.184139))}))}},{key:"getLocationDetails",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://us1.locationiq.com/v1/reverse.php?key=pk.10034caf64c0fc5c5c7c35a24632b4da&lat="+t.lat+"&lon="+t.lon+"&format=json");case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,a=r.address,s=a.country,c=a.city,e.abrupt("return",{country:s,city:c});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),j=n(0),h=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(o.a)(s,2),i=c[0],u=c[1],l=Object(r.useState)(""),d=Object(o.a)(l,2),f=d[0],p=d[1],h=Object(r.useState)(),g=Object(o.a)(h,2),v=g[0],O=g[1],y=Object(r.useState)(""),w=Object(o.a)(y,2),x=w[0],k=w[1],N=Object(r.useState)(""),P=Object(o.a)(N,2),S=P[0],C=P[1];return Object(r.useEffect)((function(){b.getSerialNumber().then((function(e){return a(e)}))}),[]),Object(r.useEffect)((function(){m.getCurrentPosition().then((function(e){return O({latitude:e.lat,longitude:e.lon}),m.getLocationDetails(e)})).then((function(e){p("".concat(e.country,", ").concat(e.city))}))}),[]),Object(j.jsx)("div",{className:"form-container",children:Object(j.jsxs)("form",{className:"register-form",onSubmit:function(e){e.preventDefault();var t=v.latitude,r=v.longitude;fetch("".concat("http://qiot-edge-edge-service.apps.ocp4.clarite.lab/","/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:t,longitude:r,serial:n,keystorePassword:x,name:i})})},children:[Object(j.jsx)("div",{className:"success-message",children:"The edge device was registered successfully!"}),Object(j.jsx)("input",{id:"serial-number",className:"form-field",type:"text",placeholder:"Serial number",name:"serialNumber",value:n,onChange:function(e){return a(e.target.value)},disabled:!0}),Object(j.jsx)("span",{id:"serial-number-error",children:"Please enter a serial number"}),Object(j.jsx)("input",{id:"name",className:"form-field",type:"text",placeholder:"Name",name:"name",onChange:function(e){return u(e.target.value)},value:i}),Object(j.jsx)("span",{id:"name-error",children:"Please enter a name"}),Object(j.jsx)("input",{id:"address",className:"form-field",type:"text",name:"address",value:f,onChange:function(e){return p(e.target.value)},disabled:!0}),Object(j.jsx)("input",{id:"keystore-password",className:"form-field",type:"password",placeholder:"Keystore password",name:"keystorePassword",onChange:function(e){return k(e.target.value)},value:x}),Object(j.jsx)("span",{id:"name-error",children:"Please enter a keystore password"}),Object(j.jsx)("input",{id:"keystore-password-confirmation",className:"form-field",type:"password",placeholder:"Keystore password confirmation",name:"keystorePasswordConfirmation",onChange:function(e){return C(e.target.value)},value:S}),Object(j.jsx)("span",{id:"name-error",children:"Provided keystore password does not match"}),Object(j.jsx)("button",{className:"form-field",type:"submit",children:"Submit"})]})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(h,{})}),document.getElementById("root")),g()}},[[17,1,2]]]);
//# sourceMappingURL=main.7c21095e.chunk.js.map