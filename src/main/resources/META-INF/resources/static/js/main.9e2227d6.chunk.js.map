{"version":3,"sources":["services/edge.service.js","models/coordinates.model.js","services/location.service.js","App.js","reportWebVitals.js","index.js"],"names":["a","fetch","process","response","json","serialNumber","console","log","CoordinatesModel","lat","lon","this","navigator","options","enableHighAccuracy","Promise","resolve","reject","geolocation","getCurrentPosition","position","coordinates","coords","latitude","longitude","defaultCoords","latlon","address","country","city","App","useState","setSerialNumber","name","setName","setAddress","setCoordinates","keystorePassword","setKeystorePassword","keystorePasswordConfirmation","setKeystorePasswordConfirmation","useEffect","EdgeService","getSerialNumber","then","value","LocationService","getLocationDetails","className","onSubmit","e","preventDefault","method","headers","body","JSON","stringify","serial","role","type","data-dismiss","aria-label","aria-hidden","htmlFor","id","aria-describedby","placeholder","onChange","target","disabled","required","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9e2227d6.chunk.js","sourcesContent":["class EdgeService {\r\n    async getSerialNumber() {\r\n        const response = await fetch(\r\n            `${process.env.REACT_APP_EDGE_SERVICE_URL}/serial-number`\r\n        );\r\n        const { serialNumber } = await response.json();\r\n        console.log(serialNumber);\r\n        return serialNumber;\r\n    }\r\n}\r\n\r\nexport default new EdgeService();","class CoordinatesModel {\r\n    constructor(lat, lon) {\r\n        this.lat = lat;\r\n        this.lon = lon;\r\n    }\r\n}\r\nexport default CoordinatesModel;","import CoordinatesModel from \"../models/coordinates.model\";\r\nconst apiKey = process.env.REACT_APP_MY_API_KEY_LOCATION;\r\n\r\nclass LocationService {\r\n    getCurrentPosition() {\r\n        if (\"geolocation\" in navigator) {\r\n            console.log(\"Available\");\r\n            const options = {\r\n                enableHighAccuracy: true,\r\n            };\r\n\r\n            return new Promise((resolve, reject) =>\r\n                navigator.geolocation.getCurrentPosition(\r\n                    (position) => {\r\n                        const coordinates = new CoordinatesModel(\r\n                            position.coords.latitude,\r\n                            position.coords.longitude\r\n                        );\r\n\r\n                        resolve(coordinates);\r\n                    },\r\n                    () => {\r\n                        const defaultCoords = new CoordinatesModel(52.184139, 21.020510);\r\n                        resolve(defaultCoords);\r\n                    },\r\n                    options\r\n                )\r\n            );\r\n        } else {\r\n            return new Promise((resolve, reject) => {\r\n                const defaultCoords = new CoordinatesModel(52.184139, 21.020510);\r\n                resolve(defaultCoords);\r\n            });\r\n        }\r\n    }\r\n\r\n    async getLocationDetails(latlon) {\r\n        const response = await fetch(\r\n            \"https://us1.locationiq.com/v1/reverse.php?key=\" +\r\n            apiKey +\r\n            \"&lat=\" +\r\n            latlon.lat +\r\n            \"&lon=\" +\r\n            latlon.lon +\r\n            \"&format=json\"\r\n        );\r\n        const {address:{country, city}} = await response.json();\r\n        return {country, city};\r\n    }\r\n}\r\nexport default new LocationService();","import './App.css';\nimport React, {useEffect, useState} from \"react\";\nimport EdgeService from './services/edge.service.js';\nimport LocationService from './services/location.service';\n\nconst App = () => {\n    const [serialNumber, setSerialNumber] = useState(\"\");\n    const [name, setName] = useState(\"\");\n    const [address, setAddress] = useState(\"\");\n    const [coordinates, setCoordinates] = useState();\n    const [keystorePassword, setKeystorePassword] = useState(\"\");\n    const [keystorePasswordConfirmation, setKeystorePasswordConfirmation] = useState(\"\");\n\n    useEffect(() => {\n        EdgeService.getSerialNumber().then(value => setSerialNumber(value));\n    }, []);\n\n    useEffect(() => {\n        LocationService.getCurrentPosition()\n            .then(value => {\n                setCoordinates({\n                    latitude: value.lat,\n                    longitude: value.lon\n                })\n                return LocationService.getLocationDetails(value)\n            })\n            .then(value => {\n                setAddress(`${value.country}, ${value.city}`)\n            })\n    }, [])\n\n    return (\n        <div className=\"container m-5\">\n            <form className=\"needs-validation\" onSubmit={e => {\n                e.preventDefault()\n                const {latitude, longitude} = coordinates;\n                fetch(`${process.env.REACT_APP_EDGE_SERVICE_URL}/register`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({latitude, longitude, serial: serialNumber, keystorePassword, name})\n                })\n            }}>\n                <div className=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\n                    <h4 className=\"alert-heading\">Success!</h4>\n                    <p>The edge device was registered successfully!</p>\n                    <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>\n\n                <div className=\"form-group mt-2\">\n                    <label htmlFor=\"serial-number\">Serial number</label>\n                    <input\n                        id=\"serial-number\"\n                        className=\"form-control\"\n                        type=\"text\"\n                        aria-describedby=\"serial-number-help\"\n                        placeholder=\"Serial number\"\n                        name=\"serialNumber\"\n                        value={serialNumber}\n                        onChange={e => setSerialNumber(e.target.value)}\n                        disabled={true}\n                    />\n                    <small id=\"serial-number-help\" className=\"form-text text-muted\">The serial number of edge\n                        device.</small>\n                </div>\n\n                <div className=\"form-group mt-2\">\n                    <label htmlFor=\"name\">Name</label>\n                    <input\n                        id=\"name\"\n                        className=\"form-control is-invalid\"\n                        type=\"text\"\n                        placeholder=\"Name\"\n                        name=\"name\"\n                        onChange={e => setName(e.target.value)}\n                        value={name}\n                        required={true}\n                    />\n                </div>\n                <div className=\"invalid-feedback\">\n                    Please enter a name\n                </div>\n\n                <div className=\"form-group mt-2\">\n                    <label htmlFor=\"address\">Address</label>\n                    <input\n                        id=\"address\"\n                        className=\"form-control\"\n                        type=\"text\"\n                        name=\"address\"\n                        value={address}\n                        onChange={e => setAddress(e.target.value)}\n                        disabled={true}\n                    />\n                    <small id=\"serial-number-help\" className=\"form-text text-muted\">Current location of edge\n                        device.</small>\n                </div>\n\n                <div className=\"form-group mt-2\">\n                    <label htmlFor=\"keystore-password\">Keystore password</label>\n                    <input\n                        id=\"keystore-password\"\n                        className=\"form-control is-invalid\"\n                        type=\"password\"\n                        placeholder=\"Keystore password\"\n                        name=\"keystorePassword\"\n                        onChange={e => setKeystorePassword(e.target.value)}\n                        value={keystorePassword}\n                        required={true}\n                    />\n                </div>\n                <div className=\"invalid-feedback\">\n                    Please enter a keystore password\n                </div>\n\n                <div className=\"form-group mt-2\">\n                    <label htmlFor=\"keystore-password-confirmation\">Keystore password confirmation</label>\n                    <input\n                        id=\"keystore-password-confirmation\"\n                        className=\"form-control is-invalid\"\n                        type=\"password\"\n                        placeholder=\"Keystore password confirmation\"\n                        name=\"keystorePasswordConfirmation\"\n                        onChange={e => setKeystorePasswordConfirmation(e.target.value)}\n                        value={keystorePasswordConfirmation}\n                        required={true}\n                    />\n                </div>\n                <div className=\"invalid-feedback\">\n                    Provided keystore password does not match\n                </div>\n\n                <button type=\"submit\" className=\"btn btn-primary btn-block mt-4\">\n                    Submit\n                </button>\n            </form>\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}